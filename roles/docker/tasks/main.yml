
- name: remove old docker distributions
  apt:
    name: "{{packages}}"
    state: absent
  vars:
    packages:
      - docker.io
      - docker


- name: check if docker exists
  shell: which docker >/dev/null 2>&1
  register: docker_exists
  ignore_errors: yes


- name: install docker
  shell: curl -sSL https://get.docker.io/ | sh
  when: docker_exists.rc > 0

# should automatically update from now on using apt
